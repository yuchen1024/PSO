\section{Commutative Pseudorandom Functions}
Let $F$ be a family of pseudorandom functions from $D$ to $R$. The standard security requirement for PRFs is pseudorandomness. 

\begin{trivlist}
\item \textbf{Pseudorandomness.} Let $\mathcal{A}$ be an adversary against PRFs and define its advantage as:
\begin{displaymath}
    \AdvA =
        \Pr \left[ b = b':~
        \begin{array}{l}
            pp \leftarrow \mathsf{Setup}(1^\lambda);\\
            k \leftarrow \mathsf{KeyGen}(pp);\\
            b \leftarrow \{0,1\}; \\
            b' \leftarrow \mathcal{A}^{\mathcal{O}_\mathsf{ror}(b, \cdot)}(\lambda);
        \end{array} 
        \right] - \frac{1}{2},
\end{displaymath}
where $\mathcal{O}_\mathsf{ror}(0, x) = F_k(x)$, $\mathcal{O}_\mathsf{ror}(1, x) = \mathsf{H}(x)$ 
(here $\mathsf{H}$ is chosen uniformly at random from all the functions 
from $D$ to $R$\footnote{To efficiently simulate access to a uniformly random function $\mathsf{H}$ from $D$ to $R$, 
one may think of a process in which the adversary's queries to $\mathcal{O}_\mathsf{ror}(1, \cdot)$ 
are ``lazily'' answered with independently and randomly chosen elements in $R$, 
while keeping track of the answers so that queries made repeatedly are answered consistently.}). 
Note that $\mathcal{A}$ can adaptively access the oracle $\mathcal{O}_\mathsf{ror}(b, \cdot)$ polynomial many times.
We say that $F$ is pseudorandom if for any PPT adversary its advantage function 
$\AdvA$ is negligible in $\lambda$. We refer to such security as full PRF security. 

Sometimes the full PRF security is not needed and it is sufficient 
if the function cannot be distinguished from a uniform random one when challenged on random inputs. 
The formalization of such relaxed requirement is \emph{weak pseudorandomness}, 
which is defined the same way as pseudorandomness except that the inputs of 
oracle $\mathcal{O}_\mathsf{ror}(b, \cdot)$ are uniformly chosen from $D$ by the challenger
instead of adversarially chosen by $\mathcal{A}$. 
PRFs that satisfy weak pseudorandomness are referred to as \emph{weak PRFs}.     
\end{trivlist}

\begin{trivlist}
\item \textbf{Composable.} For a family of keyed function $F$, $F$ is 2-composable if $R \subseteq D$, 
    namely, for any $k_1, k_2 \in K$, the function $F_{k_1}(F_{k_2}(\cdot))$ is well-defined. 
    From now on, we will assume $R = D$ for simplicity.   

\item \textbf{Commutative.} For a family of composable keyed function, we say it is commutative if:  
\begin{gather*}
    \forall k_1, k_2 \in K, \forall x \in X: F_{k_1}(F_{k_2}(x)) = F_{k_2}(F_{k_1}(x))
\end{gather*}
\end{trivlist}

It is easy to see that the standard pseudorandomness denies commutative property. 
Consider the following attack against the standand pseudorandomness of $F_k$ as below: 
the adversary $\mathcal{A}$ picks $k' \sample K$, $x \sample D$, 
and then queries the real-or-random oracle at point $F_{k'}(x)$ and point $x$ respectively, 
receiving back responses $y'$ and $y$. It then outputs `1' iff $F_{k'}(y) = y'$, with advantage $1/2 - \mathsf{negl}(\lambda)$.
  
But, weak pseudorandomness and commutative property may co-exist. 

\subsection{Further Relaxtion}
Let $F$ be a family of weak PRF $K \times D \rightarrow R$, $G$ be a family of weak PRF $S \times D \rightarrow R$. 
We assume $R \subseteq D$, and require the following property hold:
\begin{gather*}
\forall k \in K, s \in S, \forall x \in X: F_k(G_s(x)) = G_s(F_k(x)) 
\end{gather*} 

\subsection{Commutative Weak PRFs from the DDH Assumption}
We build a concrete commutative weak PRF from the DDH assumption. 
\begin{itemize}
\item $\mathsf{Setup}(1^\lambda)$: runs $\mathsf{GroupGen}(1^\lambda) \rightarrow (\mathbb{G}, g, p)$, 
    outputs $pp = (\mathbb{G}, g, p)$. 

\item $\mathsf{KeyGen}(pp)$: outputs $k \sample \mathbb{Z}_p$. 
    Each $k$ defines a function from $\mathbb{G}$ to $\mathbb{G}$, 
    which takes $x \in \mathbb{G}$ as input and outputs $x^k$. 
\end{itemize}
It is straightforward to verify that $F$ is commutative. 
By the random self-reducibility of the DDH assumption, 
the weak pseudorandomness can be tightly reduced to the DDH assumption. 
We omit the details for triviality. 

